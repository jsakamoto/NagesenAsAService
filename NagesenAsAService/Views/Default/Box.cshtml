@model Room
@{
    var urlOfThisRoom = Model.Url;
    var isOwner = Model.OwnerUserID == this.User.Identity.Name;
}
@section head {
    @Styles.Render("~/content/box-css")
}
@section headerLeft {
    <a href="/" class="go-home"></a>
    @if (isOwner)
    {
        <a href="#" id="lnk-settings" class="go-settings"></a>
    }
}
@section headerRight {
    @Html.Partial("_ShareBox", Model)
    <a href="#" id="lnk-tweet">t</a>
}

<div ng-app="theApp" class="room-page">

    <div id="box" ng-controller="roomController as ctrl">

        <div id="score-box" ng-class="'dis-coin '+ (allowDisCoin ? 'allow' : 'deny')">
            <div class="count-of-coin like">
                <span ng-bind="countOfLike|number"></span> Yen
            </div>
            <div class="count-of-coin dis">
                <span ng-bind="countOfDis|number"></span> Dis
            </div>
        </div>

        <canvas id="canvas" width="800" height="540"></canvas>
    </div>

    <div id="settings-dialog" ng-controller="settingsController as ctrl">
        <form class="form">
            @Html.AntiForgeryToken()

            <h2>@Localize.Settings</h2>

            <div class="field-container">
                <label for="twitterHashtag">@Localize.TwitterHashtag #</label>
                <input type="text" name="twitterHashtag" id="twitterHashtag" ng-model="twitterHashtag" autofocus />
            </div>
            <div class="field-container">
                <label for="allowDisCoin">
                    <input type="checkbox" name="allowDisCoin" id="allowDisCoin" value="true" ng-model="allowDisCoin" />
                    <input type="hidden" name="allowDisCoin" value="false" />
                    @Localize.AllowDisCoin
                </label>
            </div>
            <div class="buttons">
                <input type="button" value="OK" class="btn btn-primary" ng-click="ctrl.OK()" />
                <input type="button" value="@Localize.Cancel" class="btn btn-default" ng-click="ctrl.Cancel()" />
            </div>
        </form>
    </div>
</div>

@section scripts{
    @Html.Partial("_AppInfoJS", Model)
    <script>
        var _app = _app || {};
        _app.localize = _app.localize || {};
        _app.localize.IfYouLeaveThisPageYouLostCoinsImage = '@Localize.IfYouLeaveThisPageYouLostCoinsImage';
    </script>
    @Scripts.Render("~/bundles/box-js")
    <script src="~/Scripts/sharebox.js"></script>
}